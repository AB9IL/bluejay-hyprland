# Some default env vars.
env = XCURSOR_SIZE,24
env = WLR_NO_HARDWARE_CURSORS=1
env = GTK_THEME,Adwaita:dark
env = QT_STYLE_OVERRIDE,adwaita-dark
env = LD_LIBRARY_PATH,/usr/lib/nvidia
env = LIBGL_ALWAYS_SOFTWARE,0
env = __EGL_VENDOR_LIBRARY_FILENAMES,/usr/share/glvnd/egl_vendor.d/10_nvidia.json
env = GDK_BACKEND,wayland
env = CLUTTER_BACKEND,wayland
env = QT_QPA_PLATFORM,wayland
env = SDL_VIDEODRIVER,wayland
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# See https://wiki.hyprland.org/Configuring/Keywords/ for more

# Source a file (multi-file configs)
# source = ~/.config/hypr/myColors.conf

exec-once = killall xdg-desktop-portal-gtk
exec-once = killall xdg-desktop-portal-hyprland
exec-once = killall xdg-desktop-portal-wlr
exec-once = killall xdg-desktop-portal
exec-once = dbus-update-activation-environment --systemd DISPLAY HYPRLAND_INSTANCE_SIGNATURE WAYLAND_DISPLAY XDG_CURRENT_DESKTOP && systemctl --user stop hyprland-session.target && systemctl --user start hyprland-session.target
exec-once = eww open bar
#exec-once = hyprpaper
#exec-once = chatterino
#exec-once = vesktop
exec-once = /usr/libexec/xdg-desktop-portal-hyprland
#exec-once = /usr/libexec/xdg-desktop-portal-gtk
exec-once = /usr/libexec/xdg-desktop-portal
exec-once = dbus-update-activation-environment --all
#exec-once = /usr/bin/gnome-keyring-daemon --start --components=secrets
#exec-once = exec /usr/libexec/pam_kwallet_init
exec-once = waybar & /usr/libexec/xfce-polkit & dunst & nm-applet
exec-once = swayidle -w timeout 600 "$lockCommand"

monitor=HDMI-A-1,2560x1440@60, 1920x0, auto
monitor=DP-2,1920x1080@165, 0x0, auto

animations {
  bezier = fastBezier, 0.05, 1.1, 0.2, 1.0
  bezier = linear, 0.0, 0.0, 1.0, 1.0
  bezier = liner, 1, 1, 1, 1
  animation = windows, 1, 7, fastBezier, slide
  animation = windowsOut, 1, 7, fastBezier, slide
  animation = border, 1, 10, fastBezier
  animation = fade, 1, 7, fastBezier
  animation = workspaces, 1, 6, fastBezier
  animation = border, 1, 1, liner
  animation = borderangle, 1, 40, liner, loop
  animation = borderangle, 1, 100, linear, loop
  enabled = true
}

debug {
  disable_logs = false
}

decoration {
  blur {
    enabled = true
    new_optimizations = true
    passes = 3
    size = 6
  }
  active_opacity = 1.000000
  col.shadow = rgba(00000099)
  drop_shadow = true
  fullscreen_opacity = 1.000000
  inactive_opacity = 1.000000
  rounding = 8
  shadow_offset = 0 5
  shadow_range = 60
  shadow_render_power = 4
}

dwindle {
  preserve_split = true
  pseudotile = true
}

general {
  border_size=0
  col.active_border=rgb(7dcfff) rgb(c0caf5)
  col.inactive_border=rgb(24283b)
  gaps_in=10
  gaps_out=20
  layout=dwindle
  allow_tearing=true
}

gestures {
  workspace_swipe=false
}

input {
  follow_mouse=1
  force_no_accel=true
  kb_layout=us
  sensitivity=-0.5
}

master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_status = master
}

misc {
  disable_hyprland_logo=true
  key_press_enables_dpms=false
  mouse_move_enables_dpms=true
}

$mainMod=SUPER

$lockCommand = swaylock

bind=$mainMod, E, exec, thunar
bind=$mainMod, Q, killactive,
bind=$mainMod, T, exec, ptyxis
bind=$mainMod, SPACE, togglefloating,
bind=$mainMod, F, fullscreen,
bind=$mainMod, R, exec, rofi -show drun
bind=$mainMod, P, pseudo,
bind=$mainMod, J, togglesplit,
bind=$mainMod, L, exec, $lockCommand
bind=$mainMod, left, movefocus, l
bind=$mainMod, right, movefocus, r
bind=$mainMod, up, movefocus, u
bind=$mainMod, down, movefocus, d

# Switch workspaces with mainMod + [0-9]
bind=$mainMod, 1, workspace, 1
bind=$mainMod, 2, workspace, 2
bind=$mainMod, 3, workspace, 3
bind=$mainMod, 4, workspace, 4
bind=$mainMod, 5, workspace, 5
bind=$mainMod, 6, workspace, 6
bind=$mainMod, 7, workspace, 7
bind=$mainMod, 8, workspace, 8
bind=$mainMod, 9, workspace, 9
bind=$mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind=$mainMod SHIFT, 1, movetoworkspace, 1
bind=$mainMod SHIFT, 2, movetoworkspace, 2
bind=$mainMod SHIFT, 3, movetoworkspace, 3
bind=$mainMod SHIFT, 4, movetoworkspace, 4
bind=$mainMod SHIFT, 5, movetoworkspace, 5
bind=$mainMod SHIFT, 6, movetoworkspace, 6
bind=$mainMod SHIFT, 7, movetoworkspace, 7
bind=$mainMod SHIFT, 8, movetoworkspace, 8
bind=$mainMod SHIFT, 9, movetoworkspace, 9
bind=$mainMod SHIFT, 0, movetoworkspace, 10

# Move/resize windows with mouse and change workspaces
bind=$mainMod, mouse_down, workspace, e+1
bind=$mainMod, mouse_up, workspace, e-1
bindm= , mouse:276 , movewindow
bindm= , mouse:275, resizewindow

# screenshot
bind = , Print, exec, grim -g "$(slurp -d)" - | wl-copy

# Volume and Media Control
bind = , XF86AudioRaiseVolume, exec, pamixer -i 5 
bind = , XF86AudioLowerVolume, exec, pamixer -d 5 
bind = , XF86AudioMicMute, exec, pamixer --default-source -m
bind = , XF86AudioMute, exec, pamixer -t
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPause, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous


layerrule=blur, ^(gtk-layer-shell|anyrun|eww|music-widget)$
# tearing test
windowrulev2 = immediate, class:^(cs2)$

windowrulev2=noshadow, floating:0
windowrulev2=float, title:^(Volume Control)$
windowrulev2=float, title:^(Picture in picture)$
windowrulev2=float, title:^(Friends List)$
windowrulev2=float, title:^(Cryptomator)$
windowrulev2=float, title:^(RuneLite)$
windowrulev2=float, title:^(Lutris)$
windowrulev2=float, title:^(satty)$
windowrulev2=move 850 360, title:^(RuneLite)$
windowrulev2=size 830 600, title:^(RuneLite)$
windowrulev2=size 1200 600, title:^(satty)$
windowrulev2=idleinhibit focus, class:^(mpv)$
windowrulev2=idleinhibit always, class:^(firefox)$, title:^(.*YouTube.*|.*Twitch.*)$
windowrulev2=idleinhibit always, class:^(OBS Studio)$
windowrulev2=idleinhibit always, class:^(Moonlight)$
windowrulev2=idleinhibit fullscreen, class:^(firefox)$
