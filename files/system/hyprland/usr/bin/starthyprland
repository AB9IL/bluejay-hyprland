#!/usr/bin/env bash

# Tell this script to exit if there are any errors.
# You should have this in every custom script= to ensure that your completed
# builds actually ran successfully without any errors!
set -oue pipefail


hyprland_conf="$HOME/.config/hypr/hyprland.conf"
default_conf="/usr/share/hyprland/hyprland.conf"

export _JAVA_AWT_WM_NONREPARENTING=1
# Cursor settings
export XCURSOR_SIZE=20
export XCURSOR_THEME=Sweet-cursors
export HYPRCURSOR_THEME=Sweet-cursors
export HYPRCURSOR_SIZE=20

# Set kitty as default terminal
export TERMINAL=kitty
export EDITOR=kate

# Define various directories
export INBOX=$HOME/notes/Inbox/Inbox.md
export INBOX_DIR=$HOME/notes/Inbox
export DOTFILES_DIR=$HOME/dotfiles
export CACHE_DIR=$HOME/.cache

# Set color themes for KDE and GNOME applications
export XDG_MENU_PREFIX=plasma-
export GTK_THEME=Adwaita:dark
export QT_STYLE_OVERRIDE=kvantum-dark

# NVIDIA and Wayland environment variables
export LIBVA_DRIVER_NAME=nvidia
export GBM_BACKEND=nvidia-drm
export __GLX_VENDOR_LIBRARY_NAME=nvidia
export __EGL_VENDOR_LIBRARY_FILENAMES=/usr/share/glvnd/egl_vendor.d/10_nvidia.json

# Wayland environment variables
export WAYLAND_DISPLAY=wayland-0
export MOZ_ENABLE_WAYLAND=1
export XDG_CURRENT_DESKTOP=Hyprland
export XDG_SESSION_TYPE=wayland
export WLR_RENDERER_ALLOW_SOFTWARE=1
export WLR_NO_HARDWARE_CURSORS=1

# QT environment variables
export QT_QPA_PLATFORM=wayland
export QT_QPA_PLATFORMTHEME=kvantum
export QT_AUTO_SCREEN_SCALE_FACTOR=0

# Expand PATH Variable
export PATH=/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/home/iggut/.local/bin:/home/iggut/bin:/home/iggut/.nix-profile/bin:/nix/var/nix/profiles/default/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/libexec
export XDG_CONFIG_DIRS=/home/iggut/.config/kdedefaults:/etc/xdg:/usr/share/kde-settings/kde-profile/default/xdg
export XDG_DATA_DIRS=/home/iggut/.nix-profile/share:/nix/var/nix/profiles/default/share:/home/iggut/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share:/usr/share
export ICEAUTHORITY=/run/user/1000/iceauth_MalMFL
export MEMORY_PRESSURE_WATCH=/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/app.slice/dbus-:1.2-org.gnome.Ptyxis@0.service/memory.pressure
export MEMORY_PRESSURE_WRITE=c29tZSAyMDAwMDAgMjAwMDAwMAA=

if [ -f "$hyprland_conf" ]; then
    Hyprland -c "$hyprland_conf"
else
    Hyprland -c "$default_conf"
fi
